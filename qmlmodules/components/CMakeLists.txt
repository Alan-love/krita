include(ECMQmlModule)

if (QT_MAJOR_VERSION STREQUAL "6")

    ecm_add_qml_module(kritaqmlcomponents
        URI "org.krita.components"
        VERSION 1.0
        SHARED
        GENERATE_PLUGIN_SOURCE
    )

    target_sources(kritaqmlcomponents
        PRIVATE
            SvgTextLabel.cpp
            SvgTextLabel.h
    )

else ()
    ecm_add_qml_module(kritaqmlcomponents
        URI "org.krita.components"
        VERSION 1.0
        CLASSNAME KritaQmlComponentsPlugin
    )

    target_sources(kritaqmlcomponents
        PRIVATE
            KritaQmlComponentsPlugin.cpp
            KritaQmlComponentsPlugin.h
            SvgTextLabel.cpp
            SvgTextLabel.h
            KisNumParser.cpp
            KisNumParser.h
            KisCubicCurveQMLWrapper.cpp
            KisCubicCurveQMLWrapper.h
    )

endif ()

ecm_target_qml_sources(kritaqmlcomponents SOURCES
    
    qml/button/GroupButton.qml
    qml/button/OptionButtonStrip.qml
    
    qml/overlays/WarningOverlay.qml
    qml/overlays/SliderOverlay.qml
    qml/tooltip/KisToolTip.qml

    qml/textinput/TextInputWithSelectionRange.qml
    qml/textinput/TextInputWithPrefixAndSuffix.qml
    
    qml/spinbox/ParseSpinBoxContentItem.qml
    qml/spinbox/IntParseSpinBox.qml
    qml/spinbox/DoubleSpinBox.qml
    qml/spinbox/DoubleParseSpinBox.qml

    qml/sliderspinbox/SliderSpinBoxManipulator.qml
    qml/sliderspinbox/SliderSpinBoxRangeSwitch.qml
    qml/sliderspinbox/SliderSpinBoxContentItem.qml
    qml/sliderspinbox/IntSliderSpinBox.qml
    qml/sliderspinbox/DoubleSliderSpinBox.qml

    qml/curvewidget/CurveWidget.qml
    qml/angleselector/AngleGauge.qml
    qml/angleselector/AngleSelector.qml
    qml/angleselector/AngleSelectorUtil.js
)

target_link_libraries(kritaqmlcomponents
    PRIVATE
        kritaui
        Qt::Qml
        Qt::Quick
        Qt::QuickControls2
)

ecm_finalize_qml_module(kritaqmlcomponents DESTINATION ${KDE_INSTALL_QMLDIR})

# Note: we don't need ecm_generate_qmltypes, in Qt6 it is autogenerated
# by ecm_finalize_qml_module

# Note: the ecm documentation prescribes this line but it is not needed,
# since all the installation work is done by ecm_finalize_qml_module
#
# install(TARGETS kritaqmlcomponents ${KDE_INSTALL_TARGETS_DEFAULT_ARGS})



